<style>
    .main {
        background: #272525;
    }

    .layout {
        margin-left: 100px;
        margin-bottom: 200px;
        margin-right: 100px;
        margin-top: 30px;
        width: auto;
        height: auto;
        background: #ede2dc;
    }

    .title {
        color: #ede2dc;
        font-size: 30px;
        margin-top: 30px;
        margin-left: 10px;

    }

    .sortBtn { 
        background-color: red;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 30px;
        margin-bottom: 30px;
        margin-left: 10px;
    }
    
    .dealBtn:hover {
        background-color: darkred;
    }

    .cardContainer { 
        border: 1px solid black;
    }

    .cardContainer img {
        width: 130px; 
        height: auto; 
        margin: 5px;
    }

</style>



<body class="main">
    <div class="title"> Watch how each sort method works! Click on a sort method to start:</div>
    <div class="layout">
        <div>
            <button class="sortBtn" data-sort="bubble">Bubble Sort</button>
            <button class="sortBtn" data-sort="merge">Merge Sort</button>
            <button class="sortBtn" data-sort="insertion">Insertion Sort</button>
            <button class="sortBtn" data-sort="selection">Selection Sort</button>
        </div>
        <div class="cardContainer"></div>
    </div>
</body>



<script>
    const dealBtnClick = document.querySelector(".dealBtn");
    const cardContainer = document.querySelector(".cardContainer");
    const sortButtons = document.querySelectorAll(".sortBtn");
    const deckURL = `https://www.deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1`;
    let deckID;

    let cards = [];

    const cardImages = {
        1: 'https://deckofcardsapi.com/static/img/AS.png', 
        2: 'https://deckofcardsapi.com/static/img/2S.png',
        3: 'https://deckofcardsapi.com/static/img/3S.png',
        4: 'https://deckofcardsapi.com/static/img/4S.png',
        5: 'https://deckofcardsapi.com/static/img/5S.png',
        6: 'https://deckofcardsapi.com/static/img/6S.png',
        7: 'https://deckofcardsapi.com/static/img/7S.png',
        8: 'https://deckofcardsapi.com/static/img/8S.png',
        9: 'https://deckofcardsapi.com/static/img/9S.png',
        10: 'https://deckofcardsapi.com/static/img/0S.png',
        11: 'https://deckofcardsapi.com/static/img/JS.png',
        12: 'https://deckofcardsapi.com/static/img/QS.png',
        13: 'https://deckofcardsapi.com/static/img/KS.png',

    };

    const sortKeyMapping = {
        bubble: 'B',
        selection: 'S',
        merge: 'M',
        insertion: 'I',
    };


    sortButtons.forEach(button => {
        button.addEventListener("click", () => {
            const sortType = button.dataset.sort;
            sortCards(sortType);

        });
    });

    function getSortKey(sortType) {
        return sortKeyMapping[sortType];
        console.log(sortKeyMapping[sortType]); 
    }



  function sortCards(sortType) {
        const sortURL = `http://localhost:8085/api/sorts/${sortType}Cards`;
        console.log(sortURL);

        fetch(sortURL, {
            method: 'GET',
            mode: 'cors',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(),
        })
            .then(response => {
                if (response.ok) {
                    return response.json();
                }
                throw new Error('Network error');
            })
            .then(data => {
                console.log(`Received sorted data using ${sortType} sort:`, data);

                const first13Cards = data.slice(0, 13);
                cardContainer.innerHTML = '';
                
                first13Cards.forEach(card => {
                    const sortKey = getSortKey(sortType); 
                    const sortTypeCardValue = card[sortKey]; // retrieve card value using the sort-specific key
        
                    // adjust the card value to be the number part of the card object
                    const cardValue = parseInt(sortTypeCardValue, 10);
        
                    const imageSrc = cardImages[cardValue]; // image URL based on the card value
        
                    const cardImage = document.createElement('img');
                    cardImage.src = imageSrc;
                    cardImage.alt = `${sortType} - ${sortTypeCardValue}`;
                    cardImage.classList.add('card');
        
                    cardContainer.appendChild(cardImage);
                });
            })
            .catch(error => {
                console.error('Error:', error);
            });
    };

    

</script>